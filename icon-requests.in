#!/usr/bin/env python3
# -*- coding: utf-8 -*-
import signal
import locale
import gettext
import sys
import faulthandler
from os import path
from gi.repository import Gio
sys.path.insert(1, '@PYTHON_DIR@')
from IconRequests import Application

if __name__ == "__main__":
    locale.bindtextdomain('icon-requests', "@LOCALE_DIR@")
    locale.textdomain('icon-requests')
    gettext.bindtextdomain('icon-requests', "@LOCALE_DIR@")
    gettext.textdomain('icon-requests')

    resource = Gio.resource_load(path.join('@DATA_DIR@',
                                           'com.github.bilelmoussaoui.IconRequests.gresource'))
    Gio.Resource._register(resource)

    signal.signal(signal.SIGINT, signal.SIG_DFL)
    faulthandler.enable()

    app = Application()
    exit_status = app.run(None)
    sys.exit(exit_status)
